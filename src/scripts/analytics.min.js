class OnMedicAnalytics{constructor(e){this.measurementId=e,this.isInitialized=!1,this.currentLanguage=this.detectLanguage(),this.cookieConsent=this.getCookieConsent()}detectLanguage(){const e=document.documentElement.lang;return["ca","es","en"].includes(e)?e:"en"}getCookieConsent(){return localStorage.getItem("cookieConsent")}init(){"all"===this.cookieConsent&&this.loadGoogleAnalytics(),this.setupConsentListener()}loadGoogleAnalytics(){if(this.isInitialized)return;const e=document.createElement("script");e.async=!0,e.src=`https://www.googletagmanager.com/gtag/js?id=${this.measurementId}`,document.head.appendChild(e),window.dataLayer=window.dataLayer||[];function t(){dataLayer.push(arguments)}window.gtag=t,t("js",new Date),t("config",this.measurementId,{anonymize_ip:!0,cookie_expires:63072e3,cookie_update:!0,cookie_flags:"SameSite=Lax;Secure",custom_map:{custom_parameter_1:"language",custom_parameter_2:"page_type"},allow_ad_personalization_signals:!1,allow_google_signals:!1,page_title:document.title,page_location:window.location.href,language:this.currentLanguage,content_group1:this.currentLanguage,content_group2:this.getPageType()}),this.trackPageView(),this.isInitialized=!0,console.log(`ðŸ” Google Analytics initialized for language: ${this.currentLanguage}`)}getPageType(){const e=window.location.pathname;return e.includes("contact")?"contact":e.includes("privacy")||e.includes("privacitat")||e.includes("privacidad")?"privacy":e.includes("terms")||e.includes("termes")||e.includes("terminos")?"terms":e.includes("cookies")?"cookies":"/"===e||e.includes("index")?"home":"page"}trackPageView(){"undefined"!=typeof gtag&&gtag("event","page_view",{page_title:document.title,page_location:window.location.href,language:this.currentLanguage,content_group1:this.currentLanguage,content_group2:this.getPageType(),custom_parameter_1:this.currentLanguage,custom_parameter_2:this.getPageType()})}trackEvent(e,t={}){"undefined"!=typeof gtag&&"all"===this.cookieConsent&&gtag("event",e,{language:this.currentLanguage,page_type:this.getPageType(),...t})}trackFormSubmission(e){this.trackEvent("form_submit",{event_category:"Form",event_label:e,form_type:e})}trackNavigation(e,t){this.trackEvent("click",{event_category:"Navigation",event_label:e,link_text:e,destination:t})}trackLanguageChange(e,t){this.trackEvent("language_change",{event_category:"User Interaction",event_label:`${e} to ${t}`,previous_language:e,new_language:t})}setupConsentListener(){window.addEventListener("storage",e=>{"cookieConsent"===e.key&&(this.cookieConsent=e.newValue,"all"===e.newValue&&!this.isInitialized&&this.loadGoogleAnalytics())});const e=localStorage.setItem;localStorage.setItem=function(t,a){"cookieConsent"===t&&(window.onMedicAnalytics.cookieConsent=a,"all"===a&&!window.onMedicAnalytics.isInitialized&&window.onMedicAnalytics.loadGoogleAnalytics()),e.apply(this,arguments)}}enableAnalytics(){this.isInitialized||(this.cookieConsent="all",this.loadGoogleAnalytics())}disableAnalytics(){this.isInitialized=!1,this.cookieConsent="essential","undefined"!=typeof gtag&&gtag("config",this.measurementId,{send_page_view:!1})}}document.addEventListener("DOMContentLoaded",function(){window.onMedicAnalytics=new OnMedicAnalytics("G-1JMY77EBP0"),window.onMedicAnalytics.init()}),"undefined"!=typeof module&&module.exports&&(module.exports=OnMedicAnalytics);